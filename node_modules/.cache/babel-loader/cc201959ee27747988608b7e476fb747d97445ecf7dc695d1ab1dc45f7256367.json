{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const sendMessage=async e=>{e.preventDefault();if(!input.trim())return;const userMessage={role:'user',content:input};setMessages([...messages,userMessage]);setInput('');setLoading(true);try{const response=await axios.post('https://api.deepseek.com/v1/chat/completions',{model:'deepseek-chat',messages:[...messages,userMessage]},{headers:{'Authorization':\"Bearer \".concat(process.env.REACT_APP_DEEPSEEK_API_KEY),'Content-Type':'application/json'}});const assistantMessage=response.data.choices[0].message;setMessages(prev=>[...prev,assistantMessage]);}catch(error){console.error('Error:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"messages\",children:[messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.role),children:message.content},index)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u6B63\\u5728\\u601D\\u8003\\u4E2D...\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,className:\"input-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"\\u8F93\\u5165\\u60A8\\u7684\\u95EE\\u9898...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:\"\\u53D1\\u9001\"})]})]});};export default Chat;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","Chat","messages","setMessages","input","setInput","loading","setLoading","sendMessage","e","preventDefault","trim","userMessage","role","content","response","post","model","headers","concat","process","env","REACT_APP_DEEPSEEK_API_KEY","assistantMessage","data","choices","message","prev","error","console","className","children","map","index","onSubmit","type","value","onChange","target","placeholder","disabled"],"sources":["E:/桌面/聊天助手/src/components/Chat.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Chat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    const userMessage = { role: 'user', content: input };\r\n    setMessages([...messages, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post('https://api.deepseek.com/v1/chat/completions', {\r\n        model: 'deepseek-chat',\r\n        messages: [...messages, userMessage],\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${process.env.REACT_APP_DEEPSEEK_API_KEY}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      const assistantMessage = response.data.choices[0].message;\r\n      setMessages(prev => [...prev, assistantMessage]);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <div className=\"messages\">\r\n        {messages.map((message, index) => (\r\n          <div key={index} className={`message ${message.role}`}>\r\n            {message.content}\r\n          </div>\r\n        ))}\r\n        {loading && <div className=\"loading\">正在思考中...</div>}\r\n      </div>\r\n      <form onSubmit={sendMessage} className=\"input-form\">\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"输入您的问题...\"\r\n        />\r\n        <button type=\"submit\" disabled={loading}>发送</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAa,WAAW,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACN,KAAK,CAACO,IAAI,CAAC,CAAC,CAAE,OAEnB,KAAM,CAAAC,WAAW,CAAG,CAAEC,IAAI,CAAE,MAAM,CAAEC,OAAO,CAAEV,KAAM,CAAC,CACpDD,WAAW,CAAC,CAAC,GAAGD,QAAQ,CAAEU,WAAW,CAAC,CAAC,CACvCP,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAACoB,IAAI,CAAC,8CAA8C,CAAE,CAChFC,KAAK,CAAE,eAAe,CACtBf,QAAQ,CAAE,CAAC,GAAGA,QAAQ,CAAEU,WAAW,CACrC,CAAC,CAAE,CACDM,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYC,OAAO,CAACC,GAAG,CAACC,0BAA0B,CAAE,CACnE,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,gBAAgB,CAAGR,QAAQ,CAACS,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CACzDvB,WAAW,CAACwB,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEJ,gBAAgB,CAAC,CAAC,CAClD,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAChC,CAAC,OAAS,CACRrB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEP,KAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/B,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,EACtB7B,QAAQ,CAAC8B,GAAG,CAAC,CAACN,OAAO,CAAEO,KAAK,gBAC3BnC,IAAA,QAAiBgC,SAAS,YAAAX,MAAA,CAAaO,OAAO,CAACb,IAAI,CAAG,CAAAkB,QAAA,CACnDL,OAAO,CAACZ,OAAO,EADRmB,KAEL,CACN,CAAC,CACD3B,OAAO,eAAIR,IAAA,QAAKgC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,mCAAQ,CAAK,CAAC,EAChD,CAAC,cACN/B,KAAA,SAAMkC,QAAQ,CAAE1B,WAAY,CAACsB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACjDjC,IAAA,UACEqC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEhC,KAAM,CACbiC,QAAQ,CAAG5B,CAAC,EAAKJ,QAAQ,CAACI,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAE,CAC1CG,WAAW,CAAC,yCAAW,CACxB,CAAC,cACFzC,IAAA,WAAQqC,IAAI,CAAC,QAAQ,CAACK,QAAQ,CAAElC,OAAQ,CAAAyB,QAAA,CAAC,cAAE,CAAQ,CAAC,EAChD,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAA9B,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}